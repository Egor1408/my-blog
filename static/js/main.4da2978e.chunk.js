(this["webpackJsonpmy-blog"]=this["webpackJsonpmy-blog"]||[]).push([[0],{102:function(e,t,a){e.exports={wrapper:"ModalWrapper_wrapper__2p1qt",title:"ModalWrapper_title__1_1OR"}},103:function(e,t,a){e.exports={"checkbox-wrap":"Checkbox_checkbox-wrap__37UNy","check-box":"Checkbox_check-box__3ViH4",validError:"Checkbox_validError__8d33a"}},104:function(e,t,a){e.exports={linkWrap:"ModalLink_linkWrap__1KmPa",value:"ModalLink_value__w3aBd",linkName:"ModalLink_linkName__18C65"}},105:function(e,t,a){e.exports={inputWrap:"AvatarInput_inputWrap__YpKMg",label:"AvatarInput_label__1FN7n",input:"AvatarInput_input__Vs64r",validError:"AvatarInput_validError__24HdL"}},118:function(e,t,a){e.exports={buttonWrap:"Button_buttonWrap__2x4cQ",loginOut:"Button_loginOut__k9cq0",delTag:"Button_delTag__1ec93",delArticle:"Button_delArticle__3XGHd",addTag:"Button_addTag___lDA0"}},121:function(e,t,a){e.exports={buttonWrap:"InputSubmit_buttonWrap__IGrbB",spinWrap:"InputSubmit_spinWrap__3x4v6"}},122:function(e,t,a){e.exports={error:"SignUp_error__1QKUv"}},123:function(e,t,a){e.exports={error:"Profile_error__1eV_A",success:"Profile_success__1UqVh"}},151:function(e,t,a){e.exports={error:"SignIn_error__2eHvy"}},172:function(e,t,a){e.exports={wrapper:"App_wrapper__2PkVQ"}},185:function(e,t,a){},219:function(e,t,a){},24:function(e,t,a){e.exports={wrap:"ArticleItemList_wrap__4DlKM",content:"ArticleItemList_content___eQwv",header:"ArticleItemList_header__1eM_T",title:"ArticleItemList_title__9GX2D",favorites:"ArticleItemList_favorites__xieKk",heart:"ArticleItemList_heart__1DcZl",active:"ArticleItemList_active__1Lgh0",disabled:"ArticleItemList_disabled__z0Edn",tags:"ArticleItemList_tags__3Et-u",article:"ArticleItemList_article__1s-gr",description:"ArticleItemList_description__2ESma",author:"ArticleItemList_author__1Dq4M","author-avatar":"ArticleItemList_author-avatar__3YuW2","author-info":"ArticleItemList_author-info__3_B32","author-name":"ArticleItemList_author-name__3TSqB","created-date":"ArticleItemList_created-date__8QwC6"}},299:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a.n(n),s=a(42),i=a.n(s),o=a(19),l=a(15),u=a(118),d=a.n(u),p=function(e){var t=e.value,a=e.name,n=e.func;return Object(r.jsx)("div",{className:d.a.buttonWrap,children:Object(r.jsx)("button",{name:a,className:d.a[a],onClick:function(e){e.preventDefault(),n()},children:t})})},j=a(43),b=a.n(j),h=a(7),m=c.a.createContext(),O=function(){return Object(n.useContext)(m)},f=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(h.a)(a,2),s=c[0],i=c[1];return Object(r.jsx)(m.Provider,{value:{user:s,updateUser:function(e){i(e)}},children:t})},_=function(e){e.history;var t=O(),a=t.user,n=t.updateUser,c="https://static.productionready.io/images/smiley-cyrus.jpg";a&&a.image&&(c=a.image);var s=Object(r.jsxs)("div",{className:b.a.buttons,children:[Object(r.jsx)(o.b,{to:"/my-blog/new-article",className:b.a["create-article"],children:"Create article"}),Object(r.jsx)(o.b,{to:"/my-blog/my-articles/",className:b.a["my-articles"],children:"My articles"}),Object(r.jsxs)(o.b,{to:"/my-blog/profile/",className:b.a.profile,children:[Object(r.jsx)("span",{children:a&&a.username}),Object(r.jsx)("img",{className:b.a.avatar,src:c})]}),Object(r.jsx)(p,{name:"loginOut",value:"Log Out",func:function(){n(null),sessionStorage.clear()}})]}),i=Object(r.jsxs)("div",{className:b.a.buttons,children:[Object(r.jsx)(o.b,{to:"/my-blog/sign-in/",className:b.a["sign-in"],children:"Sign In"}),Object(r.jsx)(o.b,{to:"/my-blog/sign-up/",className:b.a["sign-up"],children:"Sign Up"})]}),l=a?s:i;return Object(r.jsxs)("div",{className:b.a.header,children:[Object(r.jsx)(o.b,{to:"/my-blog/articles/",className:b.a.logo,children:"Realworld Blog"}),l]})},v=a(37),x=a(10),g=a(102),y=a.n(g),N=function(e){return Object(r.jsxs)("div",{className:y.a.wrapper,children:[Object(r.jsx)("div",{className:y.a.title,children:Object(r.jsx)("span",{children:e.title})}),Object(r.jsx)("div",{className:y.a.form,children:e.children})]})},w=a(60),k=a.n(w),A=function(e){var t,a,n,c=e.userName,s=void 0===c?null:c,i=e.func,o=void 0===i?null:i,l="username-".concat(Math.random()),u=Object(x.c)(),d=u.register,p=u.errors;return Object(r.jsxs)("div",{className:k.a.inputWrap,children:[Object(r.jsx)("label",{className:k.a.label,htmlFor:l,children:"Username"}),Object(r.jsx)("input",{className:k.a.input,type:"text",name:"username",defaultValue:s,id:l,placeholder:"Username",ref:d({required:!0,minLength:3,maxLength:20}),onChange:function(){return o("username")}}),"required"===(null===(t=p.username)||void 0===t?void 0:t.type)&&Object(r.jsx)("p",{className:k.a.validError,children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),"minLength"===(null===(a=p.username)||void 0===a?void 0:a.type)&&Object(r.jsx)("p",{className:k.a.validError,children:"\u043e\u0442 3 \u0434\u043e 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}),"maxLength"===(null===(n=p.username)||void 0===n?void 0:n.type)&&Object(r.jsx)("p",{className:k.a.validError,children:"\u043e\u0442 3 \u0434\u043e 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})]})},S=a(74),E=a.n(S),I=function(e){var t,a,n=e.email,c=void 0===n?null:n,s=e.func,i=void 0===s?null:s,o="email-".concat(Math.random()),l=Object(x.c)(),u=l.register,d=l.errors;return Object(r.jsxs)("div",{className:E.a.inputWrap,children:[Object(r.jsx)("label",{className:E.a.label,htmlFor:o,children:"Email address"}),Object(r.jsx)("input",{className:E.a.input,type:"text",name:"email",defaultValue:c,id:o,placeholder:"Email address",onChange:function(){return i("email")},ref:u({required:!0,pattern:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i})}),"required"===(null===(t=d.email)||void 0===t?void 0:t.type)&&Object(r.jsx)("p",{className:E.a.validError,children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),"pattern"===(null===(a=d.email)||void 0===a?void 0:a.type)&&Object(r.jsx)("p",{className:E.a.validError,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 Email"})]})},T=a(61),L=a.n(T),W=function(e){var t,a,c,s=e.modal,i=e.watchPass,o=e.func,l=void 0===o?null:o,u="password-".concat(Math.random()),d=Object(x.c)(),p=d.register,j=d.errors,b={required:!0};if("sign-up"===s){b.minLength=8,b.manLength=40;var h=Object(x.d)("password");Object(n.useEffect)((function(){i(h)}),[h])}return"profile"===s&&(b.required=!1),Object(r.jsxs)("div",{className:L.a.inputWrap,children:[Object(r.jsx)("label",{className:L.a.label,htmlFor:u,children:"Password"}),Object(r.jsx)("input",{className:L.a.input,type:"password",name:"password",id:u,placeholder:"Password",onChange:function(){return l("password")},ref:p(b)}),"required"===(null===(t=j.password)||void 0===t?void 0:t.type)&&Object(r.jsx)("p",{className:L.a.validError,children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),"minLength"===(null===(a=j.password)||void 0===a?void 0:a.type)&&Object(r.jsx)("p",{className:L.a.validError,children:"\u043e\u0442 8 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}),"maxLength"===(null===(c=j.password)||void 0===c?void 0:c.type)&&Object(r.jsx)("p",{className:L.a.validError,children:"\u043e\u0442 8 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})]})},C=a(75),q=a.n(C),P=function(e){var t,a=e.curPass,n="repeat-password-".concat(Math.random()),c=Object(x.c)(),s=c.register,i=c.errors;return Object(r.jsxs)("div",{className:q.a.inputWrap,children:[Object(r.jsx)("label",{className:q.a.label,htmlFor:n,children:"Repeat password"}),Object(r.jsx)("input",{className:q.a.input,type:"password",name:"repeat-password",id:n,placeholder:"Repeat password",ref:s({required:!0,validate:function(e){return e===a}})}),"required"===(null===(t=i["repeat-password"])||void 0===t?void 0:t.type)&&Object(r.jsx)("p",{className:q.a.validError,children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),i["repeat-password"]&&Object(r.jsx)("p",{className:q.a.validError,children:"\u041d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 \u043f\u0430\u0440\u043e\u043b\u0435\u043c"})]})},U=a(103),M=a.n(U),R=function(e){var t,a=e.name,n=e.checkboxState,c=e.label,s=e.handleCheckbox,i="".concat(a,"-").concat(Math.random()),o=Object(x.c)(),l=o.register,u=o.errors;return Object(r.jsxs)("div",{className:M.a["checkbox-wrap"],children:[Object(r.jsx)("input",{className:M.a["check-box"],ref:l({required:!0}),name:"checkbox",id:i,type:"checkbox",checked:n,onChange:function(){s()}}),Object(r.jsx)("label",{htmlFor:i,children:Object(r.jsx)("span",{children:c})}),"required"===(null===(t=u.checkbox)||void 0===t?void 0:t.type)&&Object(r.jsx)("p",{className:M.a.validError,children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"})]})},V=a(121),H=a.n(V),z=function(e){var t=e.value,a=e.loading,n=e.loadingValue,c=Object(r.jsx)("input",{type:"submit",value:t}),s=Object(r.jsx)("div",{className:H.a.spinWrap,children:Object(r.jsx)("span",{children:n})});return Object(r.jsx)("div",{className:H.a.buttonWrap,children:a?s:c})},B=a(104),D=a.n(B),F=function(e){var t=e.linkUrl,a=e.value,n=e.linkName;return Object(r.jsxs)("div",{className:D.a.linkWrap,children:[Object(r.jsx)("span",{className:D.a.value,children:a}),Object(r.jsxs)(o.b,{className:D.a.linkName,to:t,children:[" ",n]})]})},J=a(8),Z=a.n(J),Y=a(13),G=a(149),K=a(150),Q=function(){function e(){var t=this;Object(G.a)(this,e),this._baseURL="https://conduit.productionready.io/api/",this.getArticleList=function(){var e=Object(Y.a)(Z.a.mark((function e(a,r){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest(a,r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getArticle=function(){var e=Object(Y.a)(Z.a.mark((function e(a,r){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest(a,r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.loginUser=function(){var e=Object(Y.a)(Z.a.mark((function e(a){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("users/login",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createNewAcc=function(){var e=Object(Y.a)(Z.a.mark((function e(a){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("users",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateUser=function(){var e=Object(Y.a)(Z.a.mark((function e(a,r){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("user",{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Token ".concat(r)}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getUser=Object(Y.a)(Z.a.mark((function e(){var a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("user");case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),this.createNewArticle=function(){var e=Object(Y.a)(Z.a.mark((function e(a,r){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("articles",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Token ".concat(r)}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.updateArticle=function(){var e=Object(Y.a)(Z.a.mark((function e(a,r,n){var c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("articles/".concat(n),{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Token ".concat(r)}});case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),this.deleteArticle=function(){var e=Object(Y.a)(Z.a.mark((function e(a,r){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("articles/".concat(a),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(r)}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.favoriteArticle=function(){var e=Object(Y.a)(Z.a.mark((function e(a,r){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("articles/".concat(a,"/favorite"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(r)}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.unfavoriteArticle=function(){var e=Object(Y.a)(Z.a.mark((function e(a,r){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRequest("articles/".concat(a,"/favorite"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(r)}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}return Object(K.a)(e,[{key:"getRequest",value:function(){var e=Object(Y.a)(Z.a.mark((function e(){var t,a,r,n,c=arguments;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:null,a=c.length>1&&void 0!==c[1]?c[1]:null,e.next=4,fetch("".concat(this._baseURL).concat(t),a);case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),X=a(122),$=a.n(X),ee=function(e){var t=new Q,a=e.history,c=Object(n.useState)(""),s=Object(h.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!1),u=Object(h.a)(l,2),d=u[0],p=u[1],j=Object(n.useState)(!1),b=Object(h.a)(j,2),m=b[0],f=b[1],_=Object(n.useState)(!1),g=Object(h.a)(_,2),y=g[0],w=g[1],k=Object(n.useState)(!1),S=Object(h.a)(k,2),E=S[0],T=S[1],L=O().updateUser,C=Object(x.b)(),q=function(e){};return Object(r.jsx)(x.a,Object(v.a)(Object(v.a)({},C),{},{children:Object(r.jsx)(N,{title:"Create new account",children:Object(r.jsxs)("form",{onSubmit:C.handleSubmit((function(e){var r={user:e};p(!0),t.createNewAcc(r).then((function(e){e.errors?Object.keys(e.errors).map((function(e){"email"===e&&w(!0),"username"===e&&f(!0)})):(L(e.user),function(e){var t={user:e};sessionStorage.setItem("session",JSON.stringify(t))}(e.user),a.push("/my-blog/articles/"))})).then((function(){p(!1)}))})),children:[m&&Object(r.jsx)("p",{className:$.a.error,children:"\u042d\u0442\u043e\u0442 username \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442"}),Object(r.jsx)(A,{func:q}),y&&Object(r.jsx)("p",{className:$.a.error,children:"\u0422\u0430\u043a\u043e\u0439 email \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"}),Object(r.jsx)(I,{func:q}),Object(r.jsx)(W,{modal:"sign-up",watchPass:function(e){e.password&&o(e.password)},func:q}),Object(r.jsx)(P,{curPass:i}),Object(r.jsx)(R,{handleCheckbox:function(){T((function(e){return!e}))},checkboxState:E,name:"personInfo",label:"I agree to the processing of my personal\r information"}),Object(r.jsx)(z,{value:"Create",loading:d,loadingValue:"Loading..."}),Object(r.jsx)(F,{linkUrl:"/my-blog/sign-in/",value:"Already have an account?",linkName:"Sign In"})]})})}))},te=a(151),ae=a.n(te),re=function(){var e=new Q,t=Object(x.b)(),a=O(),c=a.user,s=a.updateUser,i=Object(n.useState)(!1),o=Object(h.a)(i,2),u=o[0],d=o[1],p=Object(n.useState)(!1),j=Object(h.a)(p,2),b=j[0],m=j[1],f=function(){m(!1)};return c?Object(r.jsx)(l.a,{to:"/my-blog/articles/"}):Object(r.jsx)(x.a,Object(v.a)(Object(v.a)({},t),{},{children:Object(r.jsx)(N,{title:"Sign In",children:Object(r.jsxs)("form",{onSubmit:t.handleSubmit((function(t){d(!0);var a={user:t};e.loginUser(a).then((function(e){var t=Object.keys(e);"user"==="".concat(t)?(s(e.user),function(e){var t={user:e};sessionStorage.setItem("session",JSON.stringify(t))}(e.user)):m(!0)})).then((function(){d(!1)}))})),children:[Object(r.jsx)(I,{func:f}),Object(r.jsx)(W,{func:f}),b&&Object(r.jsx)("p",{className:ae.a.error,children:"Email \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"}),Object(r.jsx)(z,{value:"Login",loading:u,loadingValue:"Loading..."}),Object(r.jsx)(F,{linkUrl:"/sign-up/",value:"Don`t have an account?",linkName:"Sign Up"})]})})}))},ne=a(105),ce=a.n(ne),se=function(e){var t=e.url,a=void 0===t?null:t,n=e.func,c=void 0===n?null:n,s="username-".concat(Math.random()),i=Object(x.c)().register;return Object(r.jsxs)("div",{className:ce.a.inputWrap,children:[Object(r.jsx)("label",{className:ce.a.label,htmlFor:s,children:"Avatar image (url)"}),Object(r.jsx)("input",{className:ce.a.input,type:"text",name:"image",defaultValue:a,id:s,placeholder:"Avatar image",onChange:function(){return c("avatar")},ref:i()})]})},ie=a(123),oe=a.n(ie),le=function(){var e=new Q,t=Object(x.b)(),a=O(),c=a.user,s=a.updateUser,i=Object(n.useState)(!1),o=Object(h.a)(i,2),u=o[0],d=o[1],p=Object(n.useState)(!1),j=Object(h.a)(p,2),b=j[0],m=j[1],f=Object(n.useState)(!1),_=Object(h.a)(f,2),g=_[0],y=_[1],w=function(e){y(!1),"username"===e&&d(!1),"email"===e&&m(!1)};return c?Object(r.jsx)(x.a,Object(v.a)(Object(v.a)({},t),{},{children:Object(r.jsx)(N,{title:"Edit Profile",children:Object(r.jsxs)("form",{onSubmit:t.handleSubmit((function(t,a){var r={user:t};e.updateUser(function(e){var t=e.user,a={user:{}};for(var r in t)""!==t[r].trim()&&(a.user[r]=t[r]);return a}(r),c.token).then((function(e){e.errors?Object.keys(e.errors).map((function(e){"email"===e&&m(!0),"username"===e&&d(!0)})):(y(!0),s(e.user),function(e){var t={user:e};sessionStorage.setItem("session",JSON.stringify(t))}(e.user))})),a.target.reset()})),children:[u&&Object(r.jsx)("p",{className:oe.a.error,children:"\u042d\u0442\u043e\u0442 username \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442"}),Object(r.jsx)(A,{userName:c.username,func:w}),b&&Object(r.jsx)("p",{className:oe.a.error,children:"\u0422\u0430\u043a\u043e\u0439 email \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"}),Object(r.jsx)(I,{email:c.email,func:w}),Object(r.jsx)(W,{modal:"profile",func:w}),Object(r.jsx)(se,{url:c.image,func:w}),Object(r.jsx)(z,{value:"Save",loading:g,loadingValue:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d"})]})})})):Object(r.jsx)(l.a,{to:"/my-blog/sign-in"})},ue=a(20),de=a(3),pe=a.n(de),je=a(310),be=a(24),he=a.n(be),me=function(e){var t=e.data,a=e.clsForTags,c=t.title,s=t.favoritesCount,i=t.tagList,l=t.slug,u=t.description,d=t.createdAt,p=t.favorited,j=new Q,b=O().user,m=t.author,f=m.username,_=m.image,v=Object(n.useState)({}),x=Object(h.a)(v,2),g=x[0],y=x[1];Object(n.useEffect)((function(){y({favorited:p,favoritesCount:s})}),[p]);var N=Object(je.a)(new Date(d),"MMMM d, Y"),w=i.length?Object(r.jsx)("div",{className:pe()(he.a.tags,Object(ue.a)({},he.a.article,a)),children:Object(r.jsx)("ul",{children:i.map((function(e,t){return Object(r.jsx)("li",{children:Object(r.jsx)("span",{children:e})},t)}))})}):null;return Object(r.jsxs)("div",{className:pe()(he.a.wrap),children:[Object(r.jsxs)("div",{className:he.a.content,children:[Object(r.jsxs)("div",{className:he.a.header,children:[Object(r.jsx)("div",{className:he.a.title,children:Object(r.jsx)(o.b,{to:"/my-blog/articles/".concat(l),children:Object(r.jsx)("h5",{children:c})})}),Object(r.jsxs)("div",{className:he.a.favorites,children:[Object(r.jsx)("button",{className:pe()(he.a.heart,Object(ue.a)({},he.a.active,g.favorited),Object(ue.a)({},he.a.disabled,!b)),disabled:!b,onClick:function(){g.favorited?(j.unfavoriteArticle(l,b.token),y((function(e){return{favorited:!e.favorited,favoritesCount:e.favoritesCount-1}}))):(j.favoriteArticle(l,b.token),y((function(e){return{favorited:!e.favorited,favoritesCount:e.favoritesCount+1}})))}}),Object(r.jsx)("span",{children:g.favoritesCount})]})]}),w,Object(r.jsx)("div",{className:he.a.description,children:u})]}),Object(r.jsxs)("div",{className:he.a.author,children:[Object(r.jsxs)("div",{className:he.a["author-info"],children:[Object(r.jsx)("div",{className:he.a["author-name"],children:f}),Object(r.jsx)("div",{className:he.a["created-date"],children:N})]}),Object(r.jsx)("div",{className:he.a["author-avatar"],children:Object(r.jsx)("img",{src:"".concat(_),alt:f})})]})]})},Oe=a(311),fe=(a(185),function(e){var t=e.totalArticles,a=e.currentPage,n=e.nextPage;return Object(r.jsx)(Oe.a,{size:"small",current:a,total:t,pageSize:"20",onChange:function(e){n(e)}})}),_e=a(309),ve=(a(219),function(e){var t=e.tip,a=void 0===t?null:t;return Object(r.jsx)("div",{className:"spinner",children:Object(r.jsx)(_e.a,{tip:a,size:"large"})})}),xe=a(81),ge=a.n(xe),ye=function(e){var t=new Q,a=e.match,c=O().user,s=Object(n.useState)([]),i=Object(h.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)(null),d=Object(h.a)(u,2),p=d[0],j=d[1],b=Object(n.useState)(1),m=Object(h.a)(b,2),f=m[0],_=m[1],v=Object(n.useState)(!0),x=Object(h.a)(v,2),g=x[0],y=x[1],N=20*(f-1),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r="articles?";"/my-blog/my-articles/"===a.url&&(r="articles?author=".concat(c.username,"&")),y(!0),t.getArticleList("".concat(r,"offset=").concat(N,"/"),e).then((function(e){j(e.articlesCount),l(e.articles)})).then((function(){y(!1)}))};Object(n.useEffect)((function(){var e={};c?(e.headers={"Content-Type":"application/json",Authorization:"Token ".concat(c.token)},w(e)):w()}),[f,c,a]);return g?Object(r.jsx)("div",{className:ge.a.spinWrap,children:Object(r.jsx)(ve,{tip:"Loading..."})}):Object(r.jsxs)("div",{className:ge.a.wrap,children:[Object(r.jsx)("ul",{className:ge.a.articleList,children:o.map((function(e,t){return Object(r.jsx)("li",{children:Object(r.jsx)(me,{data:e})},t)}))}),Object(r.jsx)("div",{className:ge.a.pagination,children:Object(r.jsx)(fe,{totalArticles:p,currentPage:f,nextPage:function(e){_(e)}})})]})},Ne=a(170),we=a.n(Ne),ke=a(312),Ae=(a(299),function(e){var t=e.func;return Object(r.jsx)(ke.a,{placement:"rightTop",title:"Are you sure to delete this article?",onConfirm:function(){t()},okText:"Yes",cancelText:"No",children:Object(r.jsx)("button",{className:"delArticle",children:"Delete"})})}),Se=a(76),Ee=a.n(Se),Ie=function(e){var t=e.match.params.slug,a=e.history,c=O().user,s=new Q,i=Object(n.useState)(!0),l=Object(h.a)(i,2),u=l[0],d=l[1],p=Object(n.useState)({}),j=Object(h.a)(p,2),b=j[0],m=j[1],f=Object(n.useState)(!1),_=Object(h.a)(f,2),v=_[0],x=_[1];Object(n.useEffect)((function(){var e={};c?(e.headers={"Content-Type":"application/json",Authorization:"Token ".concat(c.token)},s.getArticle("articles/".concat(t,"/"),e).then((function(e){return m(e.article)}))):s.getArticle("articles/".concat(t,"/")).then((function(e){return m(e.article)}))}),[c]),Object(n.useEffect)((function(){c&&b.author?x(c.username===b.author.username):x(!1)}),[c,b.author]);return b&&b.author&&u?Object(r.jsxs)("div",{className:Ee.a.article,children:[Object(r.jsx)(me,{data:b,clsForTags:!0}),v&&Object(r.jsxs)("div",{className:Ee.a.buttons,children:[Object(r.jsx)(Ae,{func:function(){var e,r;e=t,r=c.token,d(!1),s.deleteArticle(e,r).then((function(){a.push("/my-blog/articles/")}))}}),Object(r.jsx)(o.b,{to:"/my-blog/articles/".concat(t,"/edit"),className:Ee.a["edit-article"],children:"Edit"})]}),Object(r.jsx)("div",{className:Ee.a.articleBody,children:Object(r.jsx)(we.a,{children:b.body})})]}):Object(r.jsx)("div",{className:Ee.a.spinWrap,children:Object(r.jsx)(ve,{tip:"Loading..."})})},Te=a(83),Le=a.n(Te),We=function(e){var t,a=e.name,n=e.label,c=e.placeholder,s=e.value,i="".concat(a,"-").concat(Math.random()),o=Object(x.c)(),l=o.register,u=o.errors;return Object(r.jsxs)("div",{className:Le.a.inputWrap,children:[Object(r.jsx)("label",{className:Le.a.label,htmlFor:i,children:n}),Object(r.jsx)("input",{className:Le.a.input,type:"text",name:a,id:i,defaultValue:s,placeholder:c,ref:l({required:!0})}),"required"===(null===(t=u[a])||void 0===t?void 0:t.type)&&Object(r.jsx)("p",{className:Le.a.validError,children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"})]})},Ce=a(84),qe=a.n(Ce),Pe=function(e){var t,a=e.name,n=e.label,c=e.placeholder,s=e.value,i="".concat(a,"-").concat(Math.random()),o=Object(x.c)(),l=o.register,u=o.errors;return Object(r.jsxs)("div",{className:qe.a.inputWrap,children:[Object(r.jsx)("label",{className:qe.a.label,htmlFor:i,children:n}),Object(r.jsx)("textarea",{className:qe.a.input,type:"text",name:a,id:i,placeholder:c,defaultValue:s,ref:l({required:!0})}),"required"===(null===(t=u[a])||void 0===t?void 0:t.type)&&Object(r.jsx)("p",{className:qe.a.validError,children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"})]})},Ue=a(18),Me=a(62),Re=a.n(Me),Ve=function(e){var t=e.handleTagList,a=e.articleTagsList,c=void 0===a?null:a,s=Object(x.c)().register,i=Object(n.useState)([]),o=Object(h.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)(""),j=Object(h.a)(d,2),b=j[0],m=j[1],O=Object(n.useState)(!1),f=Object(h.a)(O,2),_=f[0],v=f[1],g=Object(n.useState)(null),y=Object(h.a)(g,2),N=y[0],w=y[1],k=Object(n.useState)("add tag"),A=Object(h.a)(k,2),S=A[0],E=A[1];Object(n.useEffect)((function(){c&&u(c)}),[c]),Object(n.useEffect)((function(){t(l)}),[l]);var I=function(e){return l.some((function(t){return t===e}))},T=function(){u((function(e){return[].concat(Object(Ue.a)(e),[b])})),m("")},L=l.map((function(e){return Object(r.jsx)("li",{className:pe()(Re.a.tagItem,Object(ue.a)({},Re.a.checkTag,e===N)),onClick:function(){return t=e,void u((function(e){return e.filter((function(e){return e!==t}))}));var t},children:Object(r.jsx)("span",{children:e})},e)}));return Object(r.jsxs)("div",{className:Re.a.inputWrap,children:[Object(r.jsx)("h3",{children:"Tags"}),Object(r.jsx)("ul",{className:Re.a.tagsList,children:L}),Object(r.jsx)("input",{className:pe()(Re.a.input,Object(ue.a)({},Re.a.tagError,_)),type:"text",name:"tagList",value:b,placeholder:S,ref:s(),onChange:function(e){return function(e){m(e.target.value),E("add tag"),v(!1)}(e)}}),Object(r.jsx)(p,{value:"Add tag",name:"addTag",func:function(){if(b.trim())if(I(b)){w(b),m("");var e=window.setTimeout((function(){w(null),window.clearTimeout(e)}),2e3)}else T();else v(!0),m(""),E("\u0442\u0435\u0433 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u043e\u0439")}})]})},He=a(77),ze=a.n(He),Be=function(e){var t=new Q,a=e.history,c=e.match,s=Object(x.b)(),i=Object(n.useState)({}),o=Object(h.a)(i,2),u=o[0],d=o[1],p=Object(n.useState)(!1),j=Object(h.a)(p,2),b=j[0],m=j[1],f=Object(n.useState)([]),_=Object(h.a)(f,2),g=_[0],y=_[1],N=Object(n.useState)("Create new article"),w=Object(h.a)(N,2),k=w[0],A=w[1],S=Object(n.useState)("Send"),E=Object(h.a)(S,2),I=E[0],T=E[1],L=O().user;Object(n.useEffect)((function(){c.params.slug&&(A("Edit article"),T("Edit"),t.getArticle("articles/".concat(c.params.slug,"/")).then((function(e){d(e.article),y(e.article.tagList)})))}),[]);return L?Object(r.jsx)(x.a,Object(v.a)(Object(v.a)({},s),{},{children:Object(r.jsxs)("div",{className:ze.a.wrap,children:[Object(r.jsx)("h2",{children:k}),Object(r.jsxs)("form",{onSubmit:s.handleSubmit((function(e){e.tagList=g;var r={article:e};m(!0),function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n?t.updateArticle(e,r,n).then((function(){a.push("/my-blog/articles/")})):t.createNewArticle(e,r).then((function(){a.push("/my-blog/articles/")}))}(r,L.token,u.slug)})),children:[Object(r.jsx)("div",{className:ze.a.title,children:Object(r.jsx)(We,{name:"title",label:"Title",placeholder:"title",value:u.title})}),Object(r.jsx)("div",{className:ze.a.desc,children:Object(r.jsx)(We,{name:"description",label:"Short description",placeholder:"title",value:u.description})}),Object(r.jsx)("div",{className:ze.a.body,children:Object(r.jsx)(Pe,{name:"body",label:"Text",placeholder:"text",value:u.body})}),Object(r.jsx)("div",{className:ze.a.tags,children:Object(r.jsx)(Ve,{articleTagsList:u.tagList,handleTagList:function(e){y(e)}})}),Object(r.jsx)(z,{value:I,loading:b,loadingValue:"Loading..."})]})]})})):Object(r.jsx)(l.a,{to:"/my-blog/sign-in"})},De=a(172),Fe=a.n(De),Je=function(){var e=O().updateUser;return Object(n.useEffect)((function(){if(sessionStorage.getItem("session")){var t=JSON.parse(sessionStorage.getItem("session")).user;e(t)}}),[]),Object(r.jsx)(o.a,{children:Object(r.jsxs)("div",{className:Fe.a.wrapper,children:[Object(r.jsx)(_,{}),Object(r.jsxs)(l.d,{children:[Object(r.jsx)(l.b,{path:"/my-blog/",exact:!0,component:ye}),Object(r.jsx)(l.b,{path:"/my-blog/articles",exact:!0,component:ye}),Object(r.jsx)(l.b,{path:"/my-blog/my-articles/",exact:!0,component:ye}),Object(r.jsx)(l.b,{path:"/my-blog/articles/:slug",exact:!0,component:Ie}),Object(r.jsx)(l.b,{path:"/my-blog/sign-up",component:ee}),Object(r.jsx)(l.b,{path:"/my-blog/sign-in",component:re}),Object(r.jsx)(l.b,{path:"/my-blog/profile",component:le}),Object(r.jsx)(l.b,{path:"/my-blog/new-article",component:Be}),Object(r.jsx)(l.b,{path:"/my-blog/articles/:slug/edit",component:Be}),Object(r.jsx)(l.a,{to:"/my-blog/"})]})]})})},Ze=(a(303),Object(r.jsx)(f,{children:Object(r.jsx)(Je,{})}));i.a.render(Ze,document.getElementById("root"))},43:function(e,t,a){e.exports={header:"Header_header__2ksFT",logo:"Header_logo__1b2Wt",buttons:"Header_buttons__Yozv-","sign-in":"Header_sign-in__1PPVb","sign-up":"Header_sign-up__2zj7q","create-article":"Header_create-article__OPlDE","my-articles":"Header_my-articles__2vZDD",profile:"Header_profile__2kGo7",avatar:"Header_avatar__1MfhC"}},60:function(e,t,a){e.exports={inputWrap:"UsernameInput_inputWrap__2jNqH",label:"UsernameInput_label__1c9c6",input:"UsernameInput_input__1wBE1",validError:"UsernameInput_validError__Xjq7U"}},61:function(e,t,a){e.exports={inputWrap:"PasswordInput_inputWrap__2LHa5",label:"PasswordInput_label__2nSVG",input:"PasswordInput_input__1zWEK",validError:"PasswordInput_validError__34Eh4"}},62:function(e,t,a){e.exports={inputWrap:"TagsInput_inputWrap__2836S",input:"TagsInput_input__n3vSP","input-body":"TagsInput_input-body__2ibPU",tagError:"TagsInput_tagError__3YVRW",validError:"TagsInput_validError__2Yohs",tagsList:"TagsInput_tagsList__2x0w0",tagItem:"TagsInput_tagItem__Vigpl",checkTag:"TagsInput_checkTag__2RIE5"}},74:function(e,t,a){e.exports={inputWrap:"EmailInput_inputWrap__2dCnm",label:"EmailInput_label__1FFnG",input:"EmailInput_input__3Eqea",validError:"EmailInput_validError__1m4kA"}},75:function(e,t,a){e.exports={inputWrap:"RepeatPassInput_inputWrap__1f7gp",label:"RepeatPassInput_label__gZPcI",input:"RepeatPassInput_input__1j5eS",validError:"RepeatPassInput_validError__2Et39"}},76:function(e,t,a){e.exports={article:"Article_article__2c7ZW",articleBody:"Article_articleBody__3ii2W",buttons:"Article_buttons__33dZL","edit-article":"Article_edit-article__3ZFAo",spinWrap:"Article_spinWrap__C5Efj"}},77:function(e,t,a){e.exports={wrap:"CreateArticle_wrap__2c-mE"}},81:function(e,t,a){e.exports={wrap:"ArticlesList_wrap__2LSGV",articleList:"ArticlesList_articleList__3JAQD",spinWrap:"ArticlesList_spinWrap__3wLpY"}},83:function(e,t,a){e.exports={inputWrap:"TextInput_inputWrap__6qubz",label:"TextInput_label__3reqy",input:"TextInput_input__fnMl3","input-body":"TextInput_input-body__2v0fx",validError:"TextInput_validError__3_J8l"}},84:function(e,t,a){e.exports={inputWrap:"TextArea_inputWrap__2uL3m",label:"TextArea_label__MqHnc",input:"TextArea_input__krjsq",validError:"TextArea_validError__35LZH"}}},[[304,1,2]]]);
//# sourceMappingURL=main.4da2978e.chunk.js.map